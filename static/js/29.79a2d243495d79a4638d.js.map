{"version":3,"sources":["webpack:///src/pages/login/index2.vue","webpack:///./src/pages/login/index2.vue?2fcd","webpack:///./src/pages/login/index2.vue"],"names":["index2","data","username","pwd","methods","res","this","sub","_this","trim","key","$store","state","objs","uname","sign","$methods","mkSign","params","URLSearchParams","append","$axios","url","baseURL","method","changeOrigin","then","code","$message","type","message","$gscookie","setCookie","sync","role_id","$router","push","token","commit","prefix_on","mechanism_id","jigouTreeStr","message_obj","id","policeuser_id","mechanism_name","police_number","sex","icon","catch","req","console","log","created","getCookie","length","mounted","$refs","put","focus","login_index2","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","ref","attrs","placeholder","domProps","on","input","$event","target","composing","_v","keyup","keyCode","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/29.79a2d243495d79a4638d.js","sourcesContent":["<template>\n  <div class=\"login2\">\n    <div class=\"fromwrap\">\n      <div class=\"username\">\n        <input type=\"text\" placeholder=\"用户名\" v-model=\"username\" ref=\"put\" />\n      </div>\n      <div class=\"pass\">\n        <input type=\"password\" placeholder=\"密码\" v-model=\"pwd\" @keyup.13=\"sub\" />\n      </div>\n\n      <input type=\"submit\" class=\"sub\" value @click=\"sub\" />\n\n      <input type=\"reset\" class=\"reset\" value @click=\"res\" />\n    </div>\n  </div>\n</template>\n<style scoped>\n@import url(./index.css);\n</style>\n<script>\nimport axios from \"axios\";\nimport md5 from \"js-md5\";\nexport default {\n  data() {\n    return {\n      username: \"\",\n      pwd: \"\"\n    };\n  },\n  methods: {\n    res() {\n      this.username = this.pwd = \"\";\n    },\n    sub() {\n      if (!this.username.trim() || !this.pwd.trim()) {\n        this.$message({\n          message: \"用户名或密码不能为空\",\n          type: \"warning\"\n        });\n        return;\n      }\n\n      var key = this.$store.state.key;\n      var objs = { uname: this.username, pwd: this.pwd };\n\n      var sign = this.$methods.mkSign(objs, key);\n\n      var params = new URLSearchParams();\n      params.append(\"uname\", objs.uname);\n      params.append(\"pwd\", objs.pwd);\n      params.append(\"sign\", sign);\n\n      this.$axios({\n        url:\n          this.$store.state.baseURL +\n          \"/weixin/project/index.php?m=home&c=login&a=loginpro\",\n        method: \"POST\",\n        changeOrigin: true,\n        data: params\n      })\n        .then(res => {\n          if (res.data.code == 200) {\n            this.$message({\n              type: \"success\",\n              message: \"登陆成功！\"\n            });\n\n            // this.$store.commit(\"setSync\", {\n            //   sync: res.data.data.sync\n            // });\n            // 不能刷新页面，弃用\n\n            this.$gscookie.setCookie(\"sync\", res.data.data.sync);\n\n            if (res.data.data.role_id == 3) {\n              this.$router.push(`/indexg/guiji`);\n            } else {\n              this.$router.push(`/indexg/huizong`);\n            }\n\n            this.$gscookie.setCookie(\"gun\", res.data.data.token);\n            this.$store.commit(\"setPreFix\", {\n              prefix_on: res.data.data.prefix_on\n            });\n            this.$gscookie.setCookie(\n              \"mechanism_id\",\n              res.data.data.mechanism_id\n            );\n            this.$store.state.role_id = res.data.data.role_id;\n            this.$store.state.jigouTreeStr = res.data.data.mechanism_id;\n            let message_obj = {\n              role_id: res.data.data.role_id,\n              uname: res.data.data.uname,\n              id: res.data.data.policeuser_id,\n              mechanism_name: res.data.data.mechanism_name,\n              police_number: res.data.data.police_number,\n              sex: res.data.data.sex,\n              icon: res.data.data.icon,\n              mechanism_id: res.data.data.mechanism_id\n            };\n            this.$gscookie.setCookie(\"message_obj\", message_obj);\n          } else {\n            this.$message({\n              type: \"warning\",\n              message: \"用户名或密码错误，请重新输入\"\n            });\n          }\n        })\n        .catch(req => {\n          console.log(req);\n        });\n      this.username = \"\";\n      this.pwd = \"\";\n    }\n  },\n  created() {\n    let str = this.$gscookie.getCookie(\"gun\");\n    if (str.length) {\n      this.$router.push(\"/indexg/huizong\");\n    }\n  },\n  mounted() {\n    this.$refs.put.focus();\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/login/index2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login2\"},[_c('div',{staticClass:\"fromwrap\"},[_c('div',{staticClass:\"username\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],ref:\"put\",attrs:{\"type\":\"text\",\"placeholder\":\"用户名\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"pass\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pwd),expression:\"pwd\"}],attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},domProps:{\"value\":(_vm.pwd)},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==13){ return null; }return _vm.sub($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.pwd=$event.target.value}}})]),_vm._v(\" \"),_c('input',{staticClass:\"sub\",attrs:{\"type\":\"submit\",\"value\":\"\"},on:{\"click\":_vm.sub}}),_vm._v(\" \"),_c('input',{staticClass:\"reset\",attrs:{\"type\":\"reset\",\"value\":\"\"},on:{\"click\":_vm.res}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3e116464\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/index2.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e116464\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index2.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index2.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index2.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e116464\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3e116464\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/index2.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}