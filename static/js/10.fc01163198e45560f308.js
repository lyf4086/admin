webpackJsonp([10],{NfXE:function(t,e){},W4tj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),s=i("Dd8w"),o=i.n(s),r={props:{dianChiNumber:{type:[Number,String],default:function(){return 0}},dianlianglist:{type:Array,default:function(){return[]}},dianliangData1:{type:Array,default:function(){return["2014","2015","2016","2017","2018","2019"]}},dianliangData2:{type:Array,default:function(){return[150,200,259,360,378,450,450]}},miao:{type:String,default:function(){return""}},person:{type:String,default:function(){return""}}},data:function(){return{OneMessage:null,active_dianliang:"",moveListTimer:null,showMessage:null}},methods:{close:function(){this.$emit("closeAlert")},listMoveing:function(){this.$methods.listMove("#dianliang")},dianchi:function(t){var e=document.getElementById("dianchi"),i=this.$echarts.init(e,!0),a=t,n={color:["rgb(0,0,200)","rgba(255,255,255,.2)"],series:[{type:"pie",center:["40%","50%"],radius:["78%","70%"],hoverAnimation:!1,data:[{name:"",value:a,label:{show:!0,position:"center",color:"#fff",fontSize:38,fontWeight:"bold",formatter:function(t){return a}}},{name:"",value:100-a,label:{show:!1},labelLine:{show:!1}}]},{type:"pie",center:["99%","99%"],radius:["47%","69%"],hoverAnimation:!1,data:[{name:"",value:a,label:{show:!1},labelLine:{show:!1},itemStyle:{color:"rgba(0,0,0,0)"}},{name:"",value:0,label:{position:"inside",backgroundColor:{},padding:10}},{name:"",value:100-a,label:{show:!1},labelLine:{show:!1},itemStyle:{color:"rgba(0,0,0,0)"}}]}]};i.setOption(n)},chart2:function(){var t=document.getElementById("chart2"),e=this.$echarts.init(t,!0),i={tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255,255,255,0)"},{offset:.5,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}],global:!1}}}},grid:{top:"18%",left:"1%",right:"1%",bottom:"25%"},xAxis:[{type:"category",boundaryGap:!0,axisLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.4)"}},axisLabel:{textStyle:{color:"#d1e6eb",margin:15}},axisTick:{show:!1},data:this.dianliangData1}],yAxis:[{type:"value",min:0,splitNumber:4,splitLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.1)"}},axisLine:{show:!1},axisLabel:{show:!1,margin:20,textStyle:{color:"#d1e6eb"}},axisTick:{show:!1}}],series:[{name:"注册总量",type:"line",showAllSymbol:!0,symbolSize:8,lineStyle:{normal:{color:"#53fdfe"},borderColor:"#f0f"},label:{show:!0,position:"top",textStyle:{color:"#fff"}},itemStyle:{normal:{color:"rgba(255,255,255,1)"}},tooltip:{show:!1},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0,150,239,0.3)"},{offset:1,color:"rgba(0,253,252,0)"}],!1),shadowColor:"rgba(53,142,215, 0.9)",shadowBlur:20}},data:this.dianliangData2}]};e.setOption(i)}},created:function(){},mounted:function(){this.dianchi(this.dianChiNumber),this.chart2(),this.listMoveing()}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("div",{staticClass:"alert2"},[i("div",{staticClass:"t1"},[t._v("电池信息")]),t._v(" "),i("div",{attrs:{id:"dianchi"}}),t._v(" "),i("div",{staticClass:"message"},[i("p",[t._v("剩余电量："+t._s(t.dianChiNumber)+"%")]),t._v(" "),t.miao?i("p",[t._v("枪瞄编号："+t._s(t.miao))]):t._e(),t._v(" "),t.person?i("p",[t._v("所属警员："+t._s(t.person))]):t._e()]),t._v(" "),i("div",{staticClass:"t"},[t._v("电量趋势图")]),t._v(" "),i("div",{attrs:{id:"chart2"}}),t._v(" "),t.dianlianglist.length?i("div",{staticClass:"title"},[i("span",[t._v("电量")]),t._v(" "),i("span",[t._v("时间")])]):t._e(),t._v(" "),i("div",{staticClass:"listwrap"},[t.dianlianglist.length?i("div",{staticClass:"list",attrs:{id:"dianliang"}},t._l(t.dianlianglist,function(e,a){return i("div",{key:a,staticClass:"item"},[i("span",[t._v("电量")]),t._v(" "),i("span",[t._v("时间")])])})):t._e()]),t._v(" "),i("button",{staticClass:"close",on:{click:t.close}},[t._v("取消")])])])},staticRenderFns:[]};var c={components:{DianChiAlert:i("VU/8")(r,l,!1,function(t){i("NfXE")},"data-v-d3293cec",null).exports},data:function(){return{par:null,timeStart:"",timeEnd:"",warnTypes:[],dataList:[],showFenXi:!1,b:!0,dianchishow:!1,num:0,data1:["2014","2015","2016"],data2:[150,270,259],dianlianglist:[]}},methods:{toPerson:function(t){this.$store.commit("setPoliceId",{policeuser_id:t.policeuser_id}),this.$router.push({name:"PersonMessage"})},openAlert:function(t){this.getDianliang(t.IMEI)},closeAlert:function(){this.dianchishow=!1},paixu:function(){if(this.b)this.dataList.sort(function(t,e){return t.dateStr-e.dateStr});else this.dataList.sort(function(t,e){return e.dateStr-t.dateStr});this.b=!this.b},subSearch:function(){var t=this._data,e=t.par,i=t.timeStart,a=t.timeEnd,n=t.warnTypes.filter(function(t){return t.checked}).map(function(t){return t.id}).join(),s=i+","+a;console.log(e.mechanism_id,e.ip_id,s,n),this.getData(e.mechanism_id,e.ip_id,s,n)},typeChange:function(t){var e=this.warnTypes[t].checked;this.warnTypes[t].checked=!e},getTypes:function(){var t=this,e=this.$gscookie.getCookie("gun"),i=this.$store.state.key,a=this.$methods.mkSign({},i),n=new URLSearchParams;n.append("sign",a),n.append("token",e),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=Home&c=Index&a=basic",method:"POST",changeOrigin:!0,data:n}).then(function(e){200==e.status&&(t.warnTypes=e.data.types.map(function(t){return o()({},t,{checked:!0})}))}).catch(function(t){console.log(t)})},getDianliang:function(t){var e=this,i=this.$store.state.key,a={IMEI:t},n=this.$methods.mkSign(a,i),s=this.$gscookie.getCookie("gun"),o=new URLSearchParams;o.append("IMEI",a.IMEI),o.append("sign",n),o.append("token",s),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=Home&c=Gunaiming&a=elec",method:"POST",changeOrigin:!0,data:o}).then(function(t){e.num=t.data.elec,e.data1=t.data.data.map(function(t){return t.created}),e.data2=t.data.data.map(function(t){return t.elec}),e.dianlianglist=t.data.datas,e.dianchishow=!0}).catch(function(t){console.log(t)})},getData:function(t,e,i,a){var n=this,s={mechanism_id:t,ip_id:e,time:i,types:a},r=this.$gscookie.getCookie("gun"),l=this.$store.state.key,c=this.$methods.mkSign(s,l),d=new URLSearchParams;d.append("sign",c),d.append("token",r),d.append("time",s.time),d.append("types",s.types),d.append("mechanism_id",s.mechanism_id),d.append("ip_id",s.ip_id),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=Home&c=Index&a=alarm_infos",method:"POST",changeOrigin:!0,data:d}).then(function(t){if(200==t.status){var e=(t.data.data?t.data.data.flat():[]).map(function(t){var e=t.datetime,i=new Date(e),a=i.getTime(i);return o()({},t,{dateStr:a})});n.dataList=e}}).catch(function(t){console.log(t)})}},created:function(){var t=this.$gscookie.getCookie("gun");if("{}"==n()(t)&&this.$router.push("/loginput"),3!=this.$gscookie.getCookie("message_obj").role_id)if(this.par=this.$route.params,this.$route.params.mechanism_id){this.getTypes();var e=this.$route.params,i=e.mechanism_id,a=e.ip_id,s=(e.datetime,e.types),o=e.timeStart,r=e.timeEnd;this.timeStart=o,this.timeEnd=r;var l=o+","+r;this.getData(i,a,l,s)}else this.$router.push({name:"HuiZong"});else this.$router.push({name:"HuiZong"})},mounted:function(){this.$store.commit("setStr",{str1:"报警类型",str2:"趋势详情"})},destroyed:function(){this.$store.commit("huanyuanStr")}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("div",{attrs:{id:"sel"}},[i("i",{staticClass:"jiao"}),t._v(" "),i("i",{staticClass:"jiao"}),t._v(" "),i("i",{staticClass:"jiao"}),t._v(" "),i("i",{staticClass:"jiao"}),t._v(" "),i("div",{staticClass:"items"},[t._m(0),t._v(" "),i("div",{staticClass:"sel-wrap"},[t._v("\n        查询时间：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.timeStart,expression:"timeStart"}],attrs:{type:"date"},domProps:{value:t.timeStart},on:{input:function(e){e.target.composing||(t.timeStart=e.target.value)}}}),t._v("\n        至\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.timeEnd,expression:"timeEnd"}],attrs:{type:"date"},domProps:{value:t.timeEnd},on:{input:function(e){e.target.composing||(t.timeEnd=e.target.value)}}}),t._v(" "),t._e()])]),t._v(" "),i("div",{staticClass:"items"},[t._m(1),t._v(" "),i("div",{staticClass:"type-wrap"},t._l(t.warnTypes,function(e,a){return i("div",{key:a,staticClass:"item",class:{selected:e.checked},on:{click:function(e){t.typeChange(a)}}},[i("i"),t._v("\n          "+t._s(e.name)+"\n        ")])}))]),t._v(" "),i("div",{staticClass:"sub-wrap"},[i("div",{staticClass:"sub",on:{click:t.subSearch}},[t._v("确定")])])]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"title"},[t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),i("span",[i("i"),t._v("报警时间\n        "),i("i",{on:{click:t.paixu}})]),t._v(" "),t._m(6)]),t._v(" "),i("div",{staticClass:"scroll"},t._l(t.dataList,function(e,a){return i("div",{key:a,staticClass:"item"},[i("span",{on:{click:function(i){t.toPerson(e)}}},[t._v(t._s(e.policeuser_name))]),t._v(" "),i("span",[t._v(t._s(e.gun_code))]),t._v(" "),i("span",[t._v(t._s(e.mechanism_name))]),t._v(" "),i("span",{on:{click:function(i){t.openAlert(e)}}},[t._v(t._s(e.elec)+"%")]),t._v(" "),i("span",[t._v(t._s(e.datetime))]),t._v(" "),i("span",[t._v(t._s(e.type_name))])])}))]),t._v(" "),t.dianchishow?i("DianChiAlert",{attrs:{dianChiNumber:t.num,dianliangData1:t.data1,dianliangData2:t.data2,dianlianglist:t.dianlianglist},on:{closeAlert:t.closeAlert}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span"),this._v("\n        查询时间\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span"),this._v("\n        报警类型\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("人员姓名\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("枪支编号\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("所属机构\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("剩余电量\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("报警类型\n      ")])}]};var u=i("VU/8")(c,d,!1,function(t){i("xZ0r")},"data-v-554c3f00",null);e.default=u.exports},xZ0r:function(t,e){}});
//# sourceMappingURL=10.fc01163198e45560f308.js.map