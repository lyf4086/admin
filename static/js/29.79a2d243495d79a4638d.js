webpackJsonp([29],{OHup:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("mtWM"),a("NC6I");var s={data:function(){return{username:"",pwd:""}},methods:{res:function(){this.username=this.pwd=""},sub:function(){var e=this;if(this.username.trim()&&this.pwd.trim()){var t=this.$store.state.key,a={uname:this.username,pwd:this.pwd},s=this.$methods.mkSign(a,t),i=new URLSearchParams;i.append("uname",a.uname),i.append("pwd",a.pwd),i.append("sign",s),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=login&a=loginpro",method:"POST",changeOrigin:!0,data:i}).then(function(t){if(200==t.data.code){e.$message({type:"success",message:"登陆成功！"}),e.$gscookie.setCookie("sync",t.data.data.sync),3==t.data.data.role_id?e.$router.push("/indexg/guiji"):e.$router.push("/indexg/huizong"),e.$gscookie.setCookie("gun",t.data.data.token),e.$store.commit("setPreFix",{prefix_on:t.data.data.prefix_on}),e.$gscookie.setCookie("mechanism_id",t.data.data.mechanism_id),e.$store.state.role_id=t.data.data.role_id,e.$store.state.jigouTreeStr=t.data.data.mechanism_id;var a={role_id:t.data.data.role_id,uname:t.data.data.uname,id:t.data.data.policeuser_id,mechanism_name:t.data.data.mechanism_name,police_number:t.data.data.police_number,sex:t.data.data.sex,icon:t.data.data.icon,mechanism_id:t.data.data.mechanism_id};e.$gscookie.setCookie("message_obj",a)}else e.$message({type:"warning",message:"用户名或密码错误，请重新输入"})}).catch(function(e){console.log(e)}),this.username="",this.pwd=""}else this.$message({message:"用户名或密码不能为空",type:"warning"})}},created:function(){this.$gscookie.getCookie("gun").length&&this.$router.push("/indexg/huizong")},mounted:function(){this.$refs.put.focus()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login2"},[a("div",{staticClass:"fromwrap"},[a("div",{staticClass:"username"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"put",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"pass"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.pwd},on:{keyup:function(t){return"button"in t||13===t.keyCode?e.sub(t):null},input:function(t){t.target.composing||(e.pwd=t.target.value)}}})]),e._v(" "),a("input",{staticClass:"sub",attrs:{type:"submit",value:""},on:{click:e.sub}}),e._v(" "),a("input",{staticClass:"reset",attrs:{type:"reset",value:""},on:{click:e.res}})])])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("mboj")},"data-v-3e116464",null);t.default=n.exports},mboj:function(e,t){}});
//# sourceMappingURL=29.79a2d243495d79a4638d.js.map