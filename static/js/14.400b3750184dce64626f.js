webpackJsonp([14],{"4/+2":function(e,t){},Sjxh:function(e,t){},YPsR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),s=a("Dd8w"),c=a.n(s),o=a("hWqa"),r={components:{},props:{dataArr:{type:Array,default:function(){return[]}}},data:function(){return{fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]}},computed:{allCheck:{get:function(e){return!!this.dataArr.length&&this.dataArr.every(function(e){return e.checked})},set:function(e,t){this.$emit("changeAll",e)}}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shangchuan"},[a("div",{staticClass:"top-bar"},[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.allCheck,expression:"allCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allCheck)?e._i(e.allCheck,null)>-1:e.allCheck},on:{change:function(t){var a=e.allCheck,n=t.target,i=!!n.checked;if(Array.isArray(a)){var s=e._i(a,null);n.checked?s<0&&(e.allCheck=a.concat([null])):s>-1&&(e.allCheck=a.slice(0,s).concat(a.slice(s+1)))}else e.allCheck=i}}})]),e._v(" "),a("span",[e._v("警员姓名")]),e._v(" "),a("span",[e._v("警员编号")]),e._v(" "),a("span",[e._v("枪支编号")]),e._v(" "),a("span",[e._v("文件名")]),e._v(" "),a("span",[e._v("单位")]),e._v(" "),a("span",[e._v("上传人")]),e._v(" "),a("span",[e._v("上传时间")])]),e._v(" "),e.dataArr.length?e._e():a("div",{staticClass:"none-data"},[e._v("暂时没有数据......")]),e._v(" "),e.dataArr.length?a("ul",{staticClass:"list"},e._l(e.dataArr,function(t,n){return a("li",{key:t.id,staticClass:"item"},[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(a){var n=t.checked,i=a.target,s=!!i.checked;if(Array.isArray(n)){var c=e._i(n,null);i.checked?c<0&&e.$set(t,"checked",n.concat([null])):c>-1&&e.$set(t,"checked",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(t,"checked",s)}}})]),e._v(" "),a("span",[e._v(e._s(t.policeName))]),e._v(" "),a("span",[e._v(e._s(t.policeNum))]),e._v(" "),a("span",[e._v(e._s(t.gun_code))]),e._v(" "),a("span",[e._v(e._s(t.vname))]),e._v(" "),a("span",[e._v(e._s(t.org_name))]),e._v(" "),a("span",[e._v(e._s(t.cname))]),e._v(" "),a("span",[e._v(e._s(t.creatime))])])})):e._e()])},staticRenderFns:[]};var d=a("VU/8")(r,l,!1,function(e){a("Sjxh")},"data-v-05d28994",null).exports,h={components:{breadNav:o.a,Content:d},data:function(){return{dataList:[],currentNodeKey:"",pageTotal:0,active_page:1,active_title:"",selValue:"",putValue:"",treeListData:[],activeHandTreeData:{},activeItem:"",defaultProps:{children:"child",label:"mechanism_name"}}},methods:{subSearch:function(){this.selValue?(this.putValue.trim()||this.$message("请输入关键字！"),this.search()):this.$message("请选择搜索的文件名")},changeAll:function(e){this.dataList.forEach(function(t){return t.checked=e})},del:function(){var e=this.dataList.filter(function(e){return e.checked}).map(function(e){return e.id});e.length?confirm("确定要删除吗？请三思")&&(e.length==this.dataList.length&&(this.getDataList(this.activeItem.id,this.active_page-1),this.active_page-=1),this.deleteMessage(e)):this.$message("请选择您要删除的数据")},getTreeList:function(){var e=this,t=this.$store.state.key,a={p:1,ps:6,mechanism_id:1},n=this.$methods.mkSign(a,t),i=this.$gscookie.getCookie("gun"),s=new URLSearchParams;s.append("p",a.p),s.append("ps",a.ps),s.append("mechanism_id",a.mechanism_id),s.append("sign",n),s.append("token",i),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=mechanism&a=mechanisms_tree",method:"POST",changeOrigin:!0,data:s}).then(function(t){e.treeListData=t.data.data.list,e.handleNodeClick(e.treeListData[0])}).catch(function(e){console.log(e)}),this.hasData=!0},getDataList:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e||(e=this.$gscookie.getCookie("mechanism_id"));var n=this.$store.state.key,i={id:e,page:a},s=this.$methods.mkSign(i,n),o=this.$gscookie.getCookie("gun"),r=new URLSearchParams;r.append("id",i.id),r.append("page",i.page),r.append("sign",s),r.append("token",o),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=Video&a=index",method:"POST",changeOrigin:!0,data:r}).then(function(e){if(200==e.data.code){var a=e.data.data.map(function(e,t){return c()({},e,{checked:!1})});t.dataList=a,console.log(e),t.pageTotal=e.data.total-0}}).catch(function(e){console.log(e)})},deleteMessage:function(e){var t=this,a=this.$store.state.key,n={vid:e.join()},i=this.$methods.mkSign(n,a),s=this.$gscookie.getCookie("gun"),c=new URLSearchParams;c.append("vid",n.vid),c.append("sign",i),c.append("token",s),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=Video&a=dele",method:"POST",changeOrigin:!0,data:c}).then(function(e){200==e.data.code&&(t.$message({type:"success",message:e.data.msg}),t.getDataList(t.activeItem.id,t.active_page))}).catch(function(e){console.log(e)})},search:function(){var e=this,t=this.selValue,a=this.putValue,n={},i=this.$store.state.key;n[t]=a;var s=this.$methods.mkSign(n,i),o=this.$gscookie.getCookie("gun"),r=new URLSearchParams;r.append(t,n[t]),r.append("sign",s),r.append("token",o),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=Video&a=index",method:"POST",changeOrigin:!0,data:r}).then(function(t){if(200==t.data.code){var a=t.data.data.map(function(e,t){return c()({},e,{checked:!1})});e.dataList=a,e.pageTotal=t.data.total-0,e.selValue="",e.putValue=""}}).catch(function(e){console.log(e)})},handleNodeClick:function(e){this.$refs.page.internalCurrentPage=1,this.activeItem=e,this.getDataList(e.id)},currentChange:function(e){this.active_page=e,this.getDataList(this.activeItem.id,e)}},created:function(){var e=this.$gscookie.getCookie("message_obj");this.currentNodeKey=this.$gscookie.getCookie("mechanism_id"),3==e.role_id&&this.$router.push({name:"GuiJi"}),this.getTreeList();var t=this.$gscookie.getCookie("gun");"{}"==i()(t)&&this.$router.push("/loginput")},mounted:function(){}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vidio"},[a("div",{staticClass:"tree-menu"},[a("h3",[e._v("录音录像")]),e._v(" "),a("div",{staticClass:"nav-wrap"},[a("el-tree",{attrs:{data:e.treeListData,props:e.defaultProps,"highlight-current":!0,"node-key":"id","current-node-key":e.currentNodeKey,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),a("div",{staticClass:"top-nav"},[a("div",{staticClass:"bread-wrap"},[a("breadNav",{attrs:{title:"录音录像",next:e.activeItem.mechanism_name}})],1),e._v(" "),a("div",{staticClass:"search-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selValue,expression:"selValue"}],staticClass:"sel",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selValue=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("请选择搜索类型")]),e._v(" "),a("option",{attrs:{value:"vname"}},[e._v("文件名")]),e._v(" "),a("option",{attrs:{value:"uname"}},[e._v("警员姓名")])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.putValue,expression:"putValue"}],staticClass:"textput",attrs:{type:"text",placeholder:"请输入搜素关键字"},domProps:{value:e.putValue},on:{keyup:function(t){return"button"in t||13===t.keyCode?e.subSearch(t):null},input:function(t){t.target.composing||(e.putValue=t.target.value)}}}),e._v(" "),a("button",{staticClass:"sub",on:{click:e.subSearch}})])]),e._v(" "),a("div",{staticClass:"page-index"},[a("el-pagination",{ref:"page",attrs:{"page-size":15,"pager-count":9,"current-page":e.active_page,layout:"prev, pager, next",total:e.pageTotal},on:{"current-change":e.currentChange}})],1),e._v(" "),a("div",{staticClass:"add-del"},[a("button",[e._v("上传")]),e._v(" "),a("button",[e._v("下载")]),e._v(" "),a("button",{on:{click:e.del}},[e._v("删除")])]),e._v(" "),a("div",{staticClass:"content"},[a("Content",{attrs:{dataArr:e.dataList},on:{changeAll:e.changeAll}})],1),e._v(" "),e._e()])},staticRenderFns:[]};var p=a("VU/8")(h,u,!1,function(e){a("4/+2")},"data-v-c349ae52",null);t.default=p.exports}});
//# sourceMappingURL=14.400b3750184dce64626f.js.map