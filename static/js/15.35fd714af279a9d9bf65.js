webpackJsonp([15],{"8Luo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("hWqa"),o={props:{dataArr:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}}},data:function(){return{xiangqingData:"",xiangqingindex:0,xiangqingshow:!1}},computed:{},methods:{xiangqing:function(t){this.xiangqingindex=t,this.getXiangQing(t.id)},close:function(){this.xiangqingindex=0,this.xiangqingshow=!1},getXiangQing:function(t){var e=this,a=this.$store.state.key,i={vdeid:t},s=this.$methods.mkSign(i,a),n=this.$gscookie.getCookie("gun"),o=new URLSearchParams;o.append("vdeid",i.vdeid),o.append("sign",s),o.append("token",n),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=Bulletlist&a=consumes",method:"POST",changeOrigin:!0,data:o}).then(function(t){200==t.data.code&&(e.xiangqingData=t.data.data,e.xiangqingData.length?e.xiangqingshow=!0:e.$message("暂无数据"))}).catch(function(t){console.log(t)})}},mounted:function(){console.log(this.dataArr)}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"danyao-xiaohao"},[i("div",{staticClass:"top-list"},[i("div",{staticClass:"title"},[i("p",[t._v("弹柜总量："+t._s(t.dataArr.length))])]),t._v(" "),i("div",{staticClass:"item-wrap"},[t.dataArr.length?t._e():i("div",{staticClass:"none-data"},[t._v("暂时没有数据......")]),t._v(" "),t._l(t.dataArr,function(e,s){return i("div",{key:s,staticClass:"item"},[i("p",{staticClass:"title"},[t._v("单位："+t._s(e.org_name))]),t._v(" "),i("img",{attrs:{src:a("P7zm")}}),t._v(" "),i("p",[t._v("弹柜名称："+t._s(e.vdevSN))]),t._v(" "),i("p",[t._v("弹柜类型："+t._s(e.vtype))]),t._v(" "),i("p",[t._v("弹柜编号："+t._s(e.vCaption))]),t._v(" "),i("p",[t._v("弹药数量："+t._s(e.bulletcount))]),t._v(" "),i("h6",{staticStyle:{color:"#fff"},on:{click:function(a){t.xiangqing(e)}}},[t._v("    ")])])})],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.xiangqingshow,expression:"xiangqingshow"}],staticClass:"xiangqing-wrap"},[i("div",{staticClass:"xiangqing"},[i("p",{staticClass:"title"},[t._v("弹药详情")]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"cabinet"},t._l(t.xiangqingData,function(e,a){return i("div",{key:a,staticClass:"item item1"},[i("div",{staticClass:"text"},[i("p",[t._v("弹药名称："+t._s(e.bullname))]),t._v(" "),i("p",[t._v("弹药类型："+t._s(e.bulletType))]),t._v(" "),i("p",[t._v("消耗数量："+t._s(e.bulletConsumeCount))]),t._v(" "),t._m(0,!0)])])})),t._v(" "),t._m(1)]),t._v(" "),i("button",{staticClass:"close",on:{click:t.close}},[t._v("取消")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("div",{staticClass:"dian"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chassis"},[e("div",{staticClass:"up"}),this._v(" "),e("div",{staticClass:"down"})])}]};var r=a("VU/8")(o,c,!1,function(t){a("RSQu")},"data-v-04186ab0",null).exports,l={components:{breadNav:n.a,Content:r},data:function(){return{active_title:"",activeMechanismId:"",currentNodeKey:"",selValue:"",putValue:"",treeListData:[],dataList:[],liebiao:[],activeItem:"",defaultProps:{children:"child",label:"mechanism_name"}}},methods:{subSearch:function(){this.selValue?this.putValue?this.search(this.activeMechanismId):this.$message({message:"请输入您要搜索的内容",type:"warning"}):this.$message({message:"请选择搜索条件",type:"warning"})},getDataList:function(t){var e=this,a=this.$store.state.key,i={};t&&(i.id=t);var s=this.$methods.mkSign(i,a),n=this.$gscookie.getCookie("gun"),o=new URLSearchParams;t&&o.append("id",i.id),o.append("sign",s),o.append("token",n),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=GetDeviceList&a=index",method:"POST",changeOrigin:!0,data:o}).then(function(t){200==t.data.code&&(e.dataList=t.data.data,e.liebiao=t.data.dat)}).catch(function(t){console.log(t)})},search:function(t){var e=this,a=this.selValue,i=this.putValue,s=this.$store.state.key,n={mechanism_id:t};n[a]=i;var o=this.$methods.mkSign(n,s),c=this.$gscookie.getCookie("gun"),r=new URLSearchParams;r.append(a,n[a]),r.append("mechanism_id",n.mechanism_id),r.append("sign",o),r.append("token",c),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=GetDeviceList&a=index",method:"POST",changeOrigin:!0,data:r}).then(function(t){200==t.data.code&&(e.dataList=t.data.data)}).catch(function(t){console.log(t)})},getTreeList:function(){var t=this,e=this.$store.state.key,a={p:1,ps:6,mechanism_id:1},i=this.$methods.mkSign(a,e),s=this.$gscookie.getCookie("gun"),n=new URLSearchParams;n.append("p",a.p),n.append("ps",a.ps),n.append("mechanism_id",a.mechanism_id),n.append("sign",i),n.append("token",s),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=mechanism&a=mechanisms_tree",method:"POST",changeOrigin:!0,data:n}).then(function(e){t.treeListData=e.data.data.list}).catch(function(t){console.log(t)}),this.hasData=!0},handleNodeClick:function(t){this.activeMechanismId=t.id,this.activeItem=t,this.active_title=t.mechanism_name,this.getDataList(t.id)}},created:function(){var t=this.$gscookie.getCookie("message_obj"),e=this.$gscookie.getCookie("mechanism_id");this.currentNodeKey=this.$gscookie.getCookie("mechanism_id"),this.activeMechanismId=e,3==t.role_id&&this.$router.push({name:"GuiJi"}),this.getTreeList(),this.getDataList();var a=this.$gscookie.getCookie("gun");"{}"==s()(a)&&this.$router.push("/loginput")}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"danyaoxiaohao"},[a("div",{staticClass:"tree-menu"},[a("h3",[t._v("弹药消耗")]),t._v(" "),a("div",{staticClass:"nav-wrap"},[a("el-tree",{attrs:{data:t.treeListData,props:t.defaultProps,"highlight-current":!0,accordion:"","node-key":"id","current-node-key":t.currentNodeKey,"default-expand-all":""},on:{"node-click":t.handleNodeClick}})],1)]),t._v(" "),a("div",{staticClass:"top-nav"},[a("div",{staticClass:"bread-wrap"},[a("breadNav",{attrs:{title:"弹药消耗",next:t.active_title}})],1),t._v(" "),a("div",{staticClass:"search-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selValue,expression:"selValue"}],staticClass:"sel",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selValue=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("请选择搜索类型")]),t._v(" "),a("option",{attrs:{value:"vtype"}},[t._v("弹柜类型")]),t._v(" "),a("option",{attrs:{value:"vdevSN"}},[t._v("弹柜名称")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.putValue,expression:"putValue"}],staticClass:"textput",attrs:{type:"text",placeholder:"请输入搜素关键字"},domProps:{value:t.putValue},on:{keyup:function(e){return"button"in e||13===e.keyCode?t.subSearch(e):null},input:function(e){e.target.composing||(t.putValue=e.target.value)}}}),t._v(" "),a("button",{staticClass:"sub",on:{click:t.subSearch}})])]),t._v(" "),t._e(),t._v(" "),a("div",{staticClass:"content"},[a("Content",{attrs:{dataArr:t.dataList,list:t.liebiao}})],1),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert",staticStyle:{display:"none"}},[a("div",{staticClass:"text-wrap"},[a("div",{staticClass:"text-title"},[t._v("新增人员")]),t._v(" "),a("div",{staticClass:"text-content"},[a("span",[t._v("名称:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("编号:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("枪支数量:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("警员数量:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("所属单位:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("创建日期:")]),t._v(" "),a("input",{attrs:{type:"text"}})]),t._v(" "),a("div",{staticClass:"submit"},[t._v("确认")])])])}]};var u=a("VU/8")(l,d,!1,function(t){a("uul0")},"data-v-56e4f1c3",null);e.default=u.exports},RSQu:function(t,e){},uul0:function(t,e){}});
//# sourceMappingURL=15.35fd714af279a9d9bf65.js.map