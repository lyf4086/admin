webpackJsonp([21],{"KpY/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Gu7T"),s=e.n(i),n={data:function(){return{timeStart:"",timeEnd:"",data1:[],data2:[],names:[],data3:[],data4:[]}},methods:{sub:function(){var t=this.timeStart+","+this.timeEnd;this.getData(t)},initEchart:function(){var t=document.getElementById("chart1"),a=this.$echarts.init(t),e=["#9b92fe","#7ba5c6","#1f62ea","#1990e9","#49ddfc","#6bdafe","#39f381","#e9e37c"],i={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"1%",textStyle:{color:"#fff"},data:this.names},series:[{name:"报警类型",type:"pie",selectedMode:"single",radius:[0,"45%"],label:{show:!1},labelLine:{normal:{show:!1}},color:e,data:this.data1},{name:"机构名称",type:"pie",radius:["64%","85%"],color:e,labelLine:{normal:{show:!1}},label:{show:!1},data:this.data2}]};a.setOption(i)},initEchartRight:function(){var t=document.getElementById("chart2"),a=this.$echarts.init(t),e={tooltip:{trigger:"axis"},xAxis:[{type:"category",data:this.data3,axisLine:{lineStyle:{color:"#fff"}}}],yAxis:[{type:"value",splitNumber:4,splitLine:{lineStyle:{type:"dashed",color:"#DDD"}},axisLine:{show:!1,lineStyle:{color:"#fff"}},nameTextStyle:{color:"#999"},splitArea:{show:!1}}],series:[{name:"数量",type:"line",data:this.data4,lineStyle:{normal:{width:5,color:{type:"linear",colorStops:[{offset:0,color:"#A9F387"},{offset:1,color:"#48D8BF"}],globalCoord:!1},shadowColor:"rgba(72,216,191, 0.3)",shadowBlur:10,shadowOffsetY:20}},itemStyle:{normal:{color:"#fff",borderWidth:10,borderColor:"#A9F387"}},smooth:!0}]};a.setOption(e)},getData:function(t){var a=this,e={time:t},i=this.$gscookie.getCookie("gun"),n=this.$store.state.key,o=this.$methods.mkSign(e,n),r=new URLSearchParams;r.append("sign",o),r.append("token",i),r.append("time",e.time),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=Index&a=alarm_type_lit",method:"POST",changeOrigin:!0,data:r}).then(function(t){if(200==t.status){a.data1=t.data.data,a.data2=t.data.datas;var e=t.data.data.map(function(t){return t.name}),i=t.data.datas.map(function(t){return t.name});a.names=[].concat(s()(e),s()(i)),a.initEchart(),a.data3=t.data.tname,a.data4=t.data.tcou,a.initEchartRight()}}).catch(function(t){console.log(t)})}},created:function(){var t=this.$route.params;this.timeStart=t[0],this.timeEnd=t[1];var a=t[0]+","+t[1];this.getData(a)},mounted:function(){this.$store.commit("setStr",{str1:"报警占比",str2:"数据分析"})},destroyed:function(){this.$store.commit("huanyuanStr")}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wrap"},[e("div",{attrs:{id:"sel"}},[e("i",{staticClass:"jiao"}),t._v(" "),e("i",{staticClass:"jiao"}),t._v(" "),e("i",{staticClass:"jiao"}),t._v(" "),e("i",{staticClass:"jiao"}),t._v(" "),e("div",{staticClass:"items"},[t._m(0),t._v(" "),e("div",{staticClass:"sel-wrap"},[t._v("\n        查询时间：\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.timeStart,expression:"timeStart"}],attrs:{type:"date"},domProps:{value:t.timeStart},on:{input:function(a){a.target.composing||(t.timeStart=a.target.value)}}}),t._v("\n        至\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.timeEnd,expression:"timeEnd"}],attrs:{type:"date"},domProps:{value:t.timeEnd},on:{input:function(a){a.target.composing||(t.timeEnd=a.target.value)}}}),t._v(" "),e("div",{staticClass:"sub",on:{click:t.sub}},[t._v("查询")])])])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("span"),this._v("\n        查询时间\n      ")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[this._v("报警占比")]),this._v(" "),a("div",{attrs:{id:"chart1"}})]),this._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[this._v("数量统计")]),this._v(" "),a("div",{attrs:{id:"chart2"}})])])}]};var r=e("VU/8")(n,o,!1,function(t){e("puzn")},"data-v-f9451536",null);a.default=r.exports},puzn:function(t,a){}});
//# sourceMappingURL=21.3f6b031ddfd1a04b2467.js.map