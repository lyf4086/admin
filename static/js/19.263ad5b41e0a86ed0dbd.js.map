{"version":3,"sources":["webpack:///./src/pages/huizong/item5xq/index.vue?71d2","webpack:///./src/pages/huizong/item5xq/index.vue","webpack:///src/pages/huizong/item5xq/index.vue"],"names":["huizong_item5xq","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","_v","on","click","updown","class","active","isshow","hidden","_m","_l","item","index","key","_s","mechanism_name","policeName","gun_code","aprname","optime","planreturntime","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","item5xq","__webpack_exports__","data","dataList","timer","methods","move","$uList","$","hover","Object","__WEBPACK_IMPORTED_MODULE_1_timers__","scrollHeight","height","stop","animate","marginTop","css","find","appendTo","trigger","initMap","map","AMap","Map","center","resizeEnable","zoom","getTypes","token","$gscookie","getCookie","$store","state","sign","$methods","mkSign","params","URLSearchParams","append","$axios","url","baseURL","method","changeOrigin","then","status","console","log","catch","error","getData","t_mechanism_id","_this","objs","personList","positions","setMarker","list","activeImg","markerArr","i","xy","longitude","latitude","Marker","content","position","title","offset","Pixel","forEach","event","addListener","ev","add","setFitView","concat","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","created","_this2","mes","mechanism_id","$router","go","mounted","commit","str1","str2","beforeDestroy"],"mappings":"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","file":"static/js/19.263ad5b41e0a86ed0dbd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{attrs:{\"id\":\"container\"}}),_vm._v(\" \"),_c('div',{staticClass:\"topbtn\",on:{\"click\":_vm.updown}},[_c('i',{class:{active:!_vm.isshow}})]),_vm._v(\" \"),_c('div',{class:{hidden:_vm.isshow},attrs:{\"id\":\"message\"}},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"list\"},[_c('div',{attrs:{\"id\":\"listwrap\"}},_vm._l((_vm.dataList),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_c('span',[_vm._v(_vm._s(item.mechanism_name || \"\"))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.policeName || \"\"))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.gun_code || \"\"))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.aprname || \"\"))]),_vm._v(\" \"),_c('span',[_c('p',[_vm._v(_vm._s(item.optime || \"\"))])]),_vm._v(\" \"),_c('span',[_c('p',[_vm._v(_vm._s(item.planreturntime || \"\"))])])])}))])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('span',[_c('i'),_vm._v(\"机构名称\\n      \")]),_vm._v(\" \"),_c('span',[_c('i'),_vm._v(\"持枪人员\\n      \")]),_vm._v(\" \"),_c('span',[_c('i'),_vm._v(\"枪支编号\\n      \")]),_vm._v(\" \"),_c('span',[_c('i'),_vm._v(\"审批人员\\n      \")]),_vm._v(\" \"),_c('span',[_c('i'),_vm._v(\"借出时间\\n      \")]),_vm._v(\" \"),_c('span',[_c('i'),_vm._v(\"预计归还时间\\n      \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-727d8d60\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/huizong/item5xq/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-727d8d60\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-727d8d60\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/huizong/item5xq/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"wrap\">\r\n    <div id=\"container\"></div>\r\n    <div class=\"topbtn\" @click=\"updown\">\r\n      <i  :class=\"{active:!isshow}\"></i>\r\n    </div>\r\n    <div id=\"message\" :class=\"{hidden:isshow}\">\r\n      <div class=\"title\">\r\n        <span>\r\n          <i></i>机构名称\r\n        </span>\r\n        <span>\r\n          <i></i>持枪人员\r\n        </span>\r\n        <span>\r\n          <i></i>枪支编号\r\n        </span>\r\n        <span>\r\n          <i></i>审批人员\r\n        </span>\r\n        <span>\r\n          <i></i>借出时间\r\n        </span>\r\n        <span>\r\n          <i></i>预计归还时间\r\n        </span>\r\n      </div>\r\n      <div class=\"list\">\r\n        <div id=\"listwrap\">\r\n          <div class=\"item\" v-for=\"(item,index) in dataList\" :key=\"index\">\r\n            <span>{{item.mechanism_name || \"\"}}</span>\r\n            <span>{{item.policeName || \"\"}}</span>\r\n            <span>{{item.gun_code || \"\"}}</span>\r\n            <span>{{item.aprname || \"\"}}</span>\r\n            <span>\r\n              <p>{{item.optime || \"\"}}</p>\r\n            </span>\r\n            <span>\r\n              <p>{{item.planreturntime || \"\"}}</p>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style >\r\n@import url(./item5.css);\r\n</style>\r\n<script>\r\nimport { setInterval, clearInterval } from \"timers\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      isshow: true,\r\n      timer: null\r\n    };\r\n  },\r\n  methods: {\r\n    move() {\r\n      var $uList = $(\"#listwrap\");\r\n      var timer = null;\r\n      //触摸清空定时器\r\n      $uList\r\n        .hover(\r\n          function() {\r\n            clearInterval(timer);\r\n          },\r\n          function() {\r\n            //离开启动定时器\r\n            timer = setInterval(function() {\r\n              scrollList($uList);\r\n            }, 2000);\r\n          }\r\n        )\r\n        .trigger(\"mouseleave\"); //自动触发触摸事件\r\n      //滚动动画\r\n      function scrollList(obj) {\r\n        //获得当前<li>的高度\r\n        var scrollHeight = $(\"#listwrap .item:first\").height();\r\n        //滚动出一个<li>的高度\r\n        $uList.stop().animate(\r\n          {\r\n            marginTop: -scrollHeight\r\n          },\r\n          700,\r\n          function() {\r\n            //动画结束后，将当前<ul>marginTop置为初始值0状态，再将第一个<li>拼接到末尾。\r\n            $uList\r\n              .css({\r\n                marginTop: 0\r\n              })\r\n              .find(\".item:first\")\r\n              .appendTo($uList);\r\n          }\r\n        );\r\n      }\r\n    },\r\n\r\n    updown() {\r\n      this.isshow = !this.isshow;\r\n    },\r\n    initMap() {\r\n      let map = new AMap.Map(\"container\", {\r\n        center: [116.397428, 39.90923],\r\n        resizeEnable: true,\r\n        zoom: 13\r\n      });\r\n      this.map = map;\r\n    },\r\n    getTypes() {\r\n      let objs = {};\r\n      var token = this.$gscookie.getCookie(\"gun\");\r\n      var key = this.$store.state.key;\r\n      var sign = this.$methods.mkSign(objs, key);\r\n      var params = new URLSearchParams();\r\n      params.append(\"sign\", sign);\r\n      params.append(\"token\", token);\r\n      this.$axios({\r\n        url:\r\n          this.$store.state.baseURL +\r\n          \"/weixin/project/index.php?m=Home&c=Index&a=basic\",\r\n        method: \"POST\",\r\n        changeOrigin: true,\r\n        data: params\r\n      })\r\n        .then(data => {\r\n          if (data.status == 200) {\r\n            console.log(data);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getData(t_mechanism_id) {\r\n      let objs = { t_mechanism_id };\r\n      var token = this.$gscookie.getCookie(\"gun\");\r\n      var key = this.$store.state.key;\r\n      var sign = this.$methods.mkSign(objs, key);\r\n      var params = new URLSearchParams();\r\n      params.append(\"sign\", sign);\r\n      params.append(\"token\", token);\r\n      params.append(\"t_mechanism_id\", objs.t_mechanism_id);\r\n      this.$axios({\r\n        url:\r\n          this.$store.state.baseURL +\r\n          \"/weixin/project/index.php?m=Home&c=Index&a=gunperson_info\",\r\n        method: \"POST\",\r\n        changeOrigin: true,\r\n        data: params\r\n      })\r\n        .then(data => {\r\n          if (data.status == 200) {\r\n            this.dataList = data.data.data;\r\n            this.personList = data.data.positions;\r\n            this.setMarker(data.data.positions);\r\n            // this.move()\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    setMarker(list) {\r\n      let activeImg = require(\"@/assets/img/head-icon.png\"); //引入默认图片\r\n      let markerArr = list.map((item, i) => {\r\n        let xy = [item.longitude, item.latitude];\r\n        return new AMap.Marker({\r\n          content: `<div class=\"marker-route11\" >\r\n                      <div class=\"cover11\" ></div>\r\n                      <div class=\"img_wrap11\">\r\n                        <img src=\"${activeImg}\" />\r\n                      </div>\r\n                    </div>`,\r\n          position: xy,\r\n          title: item.policeName,\r\n          offset: new AMap.Pixel(-16, -56)\r\n        });\r\n      });\r\n      markerArr.forEach(item => {\r\n        AMap.event.addListener(item, \"click\", function(ev) {\r\n          // console.log(333);\r\n        });\r\n      });\r\n\r\n      this.map.add(markerArr);\r\n      this.map.setFitView([...markerArr]);\r\n    }\r\n  },\r\n  created() {\r\n    let mes = this.$gscookie.getCookie(\"message_obj\");\r\n    this.t_mechanism_id = mes.mechanism_id;\r\n    this.getData(mes.mechanism_id);\r\n    this.timer = setInterval(() => {\r\n      this.$router.go(0);\r\n    }, 180000);\r\n  },\r\n  mounted() {\r\n    this.initMap();\r\n    this.$store.commit(\"setStr\", {\r\n      str1: \"全国枪支\",\r\n      str2: \"出勤详情\"\r\n    });\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n    this.timer = null;\r\n    this.$store.commit(\"huanyuanStr\");\r\n  }\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/huizong/item5xq/index.vue"],"sourceRoot":""}