webpackJsonp([35],{"5x7E":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),n={data:function(){return{warningType:[{id:"03",name:"入套报警",checked:!0},{id:"07",name:"区域报警",checked:!0},{id:"08",name:"逾期报警",checked:!0},{id:"09",name:"离套报警",checked:!0}],showFenXi:!1,steap:1,dbtimestart:"",dbtimeend:"",dbtimechaxun:"",dbwarningtype:[{id:"03",name:"入套报警",checked:!1},{id:"07",name:"区域报警",checked:!1},{id:"08",name:"逾期报警",checked:!1},{id:"09",name:"离套报警",checked:!1}],selectedType:"",dbjigoulist:[],dbselectedjigou:"",dbtext:"",dbnames:["111","222"],dbx:["06:00","07:00","23:55"],dblist:[],ip_id:"",mechanism_id:"",types:[],mec:[],dataArr:[20,12,31,34,31,20,12,31,34],dataArr2:[10,20,5,9,3,10,20,5,9,3],legendData:["本月报警","上月报警"],xdata:[],rightData1:["14","15","16","17","18","19","20","21","22","23"],rightData2:[393,438,485,631,689,824,987,1e3,1100,1200],dbdate:[],dbDataList:[],dbDatax:[],dbDataName:[]}},methods:{sub:function(){var t=this.mec.filter(function(t){return t.checked}).map(function(t){return t.id}),e=this.mec.filter(function(t){return t.checked}).map(function(t){return t.ip_id});t.length?this.getData(this.t_mechanism_id,t.join(),e.join()):this.$message({type:"warning",message:"必须选择至少一个机构"})},dbjigoucheck:function(t){this.dbjigoulist.forEach(function(t){return t.checked=!1}),this.dbjigoulist[t].checked=!this.dbjigoulist[t].checked},typeChange:function(t){this.types[t].checked=!this.types[t].checked},changeMec:function(t){this.mec[t].checked=!this.mec[t].checked},dbchecktype:function(t){this.dbwarningtype[t].checked=!this.dbwarningtype[t].checked},next1:function(){this.dbtimestart&&this.dbtimeend?this.steap=2:this.$message({type:"warning",message:"请选择起止时间"})},next2:function(){var t=this.dbwarningtype.find(function(t){return t.checked});t?(this.selectedType=t.id,this.steap=3):this.$message({type:"warning",message:"请选择类型"})},next3:function(){var t=this.dbjigoulist.filter(function(t){return t.checked});if(t.length>0&&""!=this.dbtimechaxun){this.steap=4;var e=t[0].ip_id,i=(t.map(function(t){return t.id}).join(),this.t_mechanism_id),a=this.dbtimechaxun,s=this.dbjigoulist.find(function(t){return t.checked}).id,n=this.dbtimestart+","+this.dbtimeend,c=this.dbwarningtype.filter(function(t){return t.checked}).map(function(t){return t.id}).join();this.getDuiBi(i,s,e,c,n,a)}else this.$message({type:"warning",message:"请选择机构或时间"})},next4:function(){this.dbtimestart="",this.dbtimeend="",this.dbtimechaxun="",this.dbwarningtype.forEach(function(t){return t.checked=!1}),this.dbjigoulist.forEach(function(t){return t.checked=!1}),this.steap=1,this.showFenXi=!1},subDuiBi:function(){this.getDuiBi(32,1,"03,09,07,08","2019-08-16,2019-08-22")},close:function(){this.steap=1,this.showFenXi=!1,this.next4()},fenxi:function(){this.showFenXi=!0},chartLeft:function(){var t=document.getElementById("chart1"),e=this.$echarts.init(t,!0),i=this.xdata,a=this.legendData,s=this.dataArr,n=this.dataArr2,c=new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#00CAE0"},{offset:1,color:"#006EFB"}]),o=new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#E37552"},{offset:1,color:"#9E5431"}]),r={title:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:a,align:"right",right:10,textStyle:{color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},calculable:!0,xAxis:[{type:"category",axisLabel:{textStyle:{fontSize:14,color:"#fff"}},axisLine:{lineStyle:{color:"#00A2FF",width:2}},axisTick:{show:!1},data:i}],yAxis:[{type:"value",axisLabel:{formatter:"{value}",color:"#65F5FD",fontSize:14},axisLine:{lineStyle:{color:"rgba(255,255,255,0)"}},splitLine:{lineStyle:{type:"dashed",color:"#385B71"}}}],series:[{name:a[0],type:"bar",barWidth:10,barGap:1,itemStyle:{normal:{color:c}},data:s},{name:a[1],type:"bar",barWidth:10,barGap:1,itemStyle:{normal:{color:o}},data:n}]};e.setOption(r)},chartRight:function(){var t=document.getElementById("chart2"),e=this.$echarts.init(t,!0),i={title:{left:"center",bottom:"3%",textStyle:{color:"#fff",fontSize:16}},grid:{top:"20%",left:"5%",right:"5%",bottom:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.rightData1,axisLabel:{margin:30,color:"#ffffff63"},axisLine:{show:!1},axisTick:{show:!0,length:25,lineStyle:{color:"#ffffff1f"}},splitLine:{show:!0,lineStyle:{color:"#ffffff1f"}}},yAxis:[{type:"value",position:"right",axisLabel:{margin:20,color:"#ffffff63"},axisTick:{show:!0,length:15,lineStyle:{color:"#ffffff1f"}},splitLine:{show:!0,lineStyle:{color:"#ffffff1f"}},axisLine:{lineStyle:{color:"#fff",width:2}}}],series:[{name:"注册总量",type:"line",smooth:!0,showAllSymbol:!0,symbol:"circle",symbolSize:6,lineStyle:{normal:{color:"#fff"}},label:{show:!0,position:"top",textStyle:{color:"#fff"}},itemStyle:{color:"red",borderColor:"#fff",borderWidth:3},tooltip:{show:!1},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#eb64fb"},{offset:1,color:"#3fbbff0d"}],!1)}},data:this.rightData2}]};e.setOption(i)},duibichart:function(){var t=this,e=document.getElementById("dbchart"),i=this.$echarts.init(e,!0);var a={name:"移动",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:3}},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"rgba(16,97,204, 0.3)"},{offset:.8,color:"rgba(17,235,210, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"#ccc"},emphasis:{color:"rgb(0,196,132)",borderColor:"rgba(0,196,132,0.2)",extraCssText:"box-shadow: 8px 8px 8px rgba(0, 0, 0, 1);",borderWidth:10}},data:null},n=[];this.dbDataList.forEach(function(e,i){var c="rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")",o=s()({},a,{name:t.dbDataName[i],itemStyle:{normal:{color:c}},data:e});n.push(o)});var c={tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#57617B"}}},legend:{icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:this.dbDataName,right:"4%",textStyle:{fontSize:12,color:"#fff"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#fff"}},data:this.dbDatax}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{lineStyle:{color:"#fff"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:n};i.setOption(c)},getTypes:function(){var t=this,e=this.$gscookie.getCookie("gun"),i=this.$store.state.key,a=this.$methods.mkSign({},i),n=new URLSearchParams;n.append("sign",a),n.append("token",e),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=Home&c=Index&a=basic",method:"POST",changeOrigin:!0,data:n}).then(function(e){200==e.status&&(t.ip_id=e.data.mec[0].ip_id,t.types=e.data.types.map(function(t){return s()({},t,{checked:!1})}),t.mec=e.data.mec.map(function(t,e){return 0==e?s()({},t,{checked:!0}):s()({},t,{checked:!1})}),t.dbjigoulist=e.data.mec.map(function(t,e){return 0==e?s()({},t,{checked:!0}):s()({},t,{checked:!1})}),t.getData(t.t_mechanism_id,t.t_mechanism_id,t.ip_id))}).catch(function(t){console.log(t)})},getData:function(t,e,i){var a=this,s={t_mechanism_id:t,mid:e,ip_id:i},n=this.$gscookie.getCookie("gun"),c=this.$store.state.key,o=this.$methods.mkSign(s,c),r=new URLSearchParams;r.append("sign",o),r.append("token",n),r.append("t_mechanism_id",s.t_mechanism_id),r.append("mid",s.mid),r.append("ip_id",s.ip_id),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=Home&c=Index&a=moth_ainfo",method:"POST",changeOrigin:!0,data:r}).then(function(t){200==t.status&&(a.dataArr=t.data.number,a.dataArr2=t.data.last,a.xdata=t.data.tname,a.rightData1=t.data.tname,a.rightData2=t.data.ratio,a.chartLeft(),a.chartRight(),console.log(t.data.ratio))}).catch(function(t){console.log(t)})},getDuiBi:function(t,e,i,a,s,n){var c=this,o={t_mechanism_id:t,mid:e,ip_id:i,tid:a,time:s,ntime:n};console.log(o);var r=this.$gscookie.getCookie("gun"),d=this.$store.state.key,l=this.$methods.mkSign(o,d),h=new URLSearchParams;h.append("sign",l),h.append("token",r),h.append("t_mechanism_id",o.t_mechanism_id),h.append("mid",o.mid),h.append("ip_id",o.ip_id),h.append("tid",o.tid),h.append("time",o.time),h.append("ntime",o.ntime),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=Home&c=Index&a=moth_info",method:"POST",changeOrigin:!0,data:h}).then(function(t){if(200!=t.status);else{c.dbDataList=t.data.data,c.dbDatax=t.data.dates,c.dbDataName=t.data.tname,c.dbtext="";var e=t.data.content.length,i=0,a=setInterval(function(){i<e?(c.dbtext+=t.data.content[i],i++):clearInterval(a)},100);c.duibichart()}}).catch(function(t){console.log(t)})}},created:function(){var t=this.$gscookie.getCookie("message_obj");this.$route.params;this.t_mechanism_id=t.mechanism_id,this.getTypes()},mounted:function(){this.$store.commit("setStr",{str1:"报警分析",str2:"增长率"})},destroyed:function(){this.$store.commit("huanyuanStr")}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("div",{attrs:{id:"sel"}},[i("i",{staticClass:"jiao"}),t._v(" "),i("i",{staticClass:"jiao"}),t._v(" "),i("i",{staticClass:"jiao"}),t._v(" "),i("i",{staticClass:"jiao"}),t._v(" "),i("div",{staticClass:"items"},[t._v("\n       \n       \n    ")]),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),i("div",{staticClass:"items"},[t._m(2),t._v(" "),i("div",{staticClass:"jg-wrap"},t._l(t.mec,function(e,a){return i("div",{key:a,staticClass:"item",class:{selected:e.checked},on:{click:function(e){t.changeMec(a)}}},[i("i"),t._v("\n          "+t._s(e.mechanism_name)+"\n        ")])}))]),t._v(" "),i("div",{staticClass:"sub-wrap"},[i("div",{staticClass:"sub",on:{click:t.sub}},[t._v("确定")])]),t._v(" "),i("div",{staticClass:"fenxiduibi",on:{click:t.fenxi}},[t._v("对比分析")])]),t._v(" "),t._m(3),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showFenXi,expression:"showFenXi"}],staticClass:"cover"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.steap,expression:"steap===1"}],staticClass:"alert"},[i("button",{on:{click:t.close}},[t._v("X")]),t._v(" "),i("div",{staticClass:"buzou"}),t._v(" "),t._m(4),t._v(" "),i("div",{staticClass:"selwrap"},[t._v("\n        查询时间\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dbtimestart,expression:"dbtimestart"}],attrs:{type:"date"},domProps:{value:t.dbtimestart},on:{input:function(e){e.target.composing||(t.dbtimestart=e.target.value)}}}),t._v("\n        至\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dbtimeend,expression:"dbtimeend"}],attrs:{type:"date"},domProps:{value:t.dbtimeend},on:{input:function(e){e.target.composing||(t.dbtimeend=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"next",on:{click:t.next1}},[t._v("下一步")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.steap,expression:"steap===2"}],staticClass:"alert2"},[i("button",{on:{click:t.close}},[t._v("X")]),t._v(" "),i("div",{staticClass:"buzou"}),t._v(" "),t._m(5),t._v(" "),i("div",{staticClass:"typewrap"},t._l(t.dbwarningtype,function(e,a){return i("div",{key:a,staticClass:"item",class:{selected:e.checked},on:{click:function(e){t.dbchecktype(a)}}},[i("i"),t._v("\n          "+t._s(e.name)+"\n        ")])})),t._v(" "),i("div",{staticClass:"next",on:{click:t.next2}},[t._v("下一步")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.steap,expression:"steap===3"}],staticClass:"alert3"},[i("button",{on:{click:t.close}},[t._v("X")]),t._v(" "),i("div",{staticClass:"buzou"}),t._v(" "),t._m(6),t._v(" "),i("div",{staticClass:"typewrap"},t._l(t.dbjigoulist,function(e,a){return i("div",{key:a,staticClass:"item",class:{selected:e.checked},on:{click:function(e){t.dbjigoucheck(a)}}},[i("i"),t._v("\n          "+t._s(e.mechanism_name)+"\n        ")])})),t._v(" "),t._m(7),t._v(" "),i("div",{staticClass:"selwrap"},[t._v("\n        查询时间\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dbtimechaxun,expression:"dbtimechaxun"}],attrs:{type:"date"},domProps:{value:t.dbtimechaxun},on:{input:function(e){e.target.composing||(t.dbtimechaxun=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"next",on:{click:t.next3}},[t._v("下一步")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4===t.steap,expression:"steap===4"}],staticClass:"alert4"},[i("button",{on:{click:t.close}},[t._v("X")]),t._v(" "),i("div",{attrs:{id:"dbchart"}}),t._v(" "),i("p"),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(t.dbtext))]),t._v(" "),i("div",{staticClass:"next",on:{click:t.next4}},[t._v("关闭")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span"),this._v("\n        查询时间\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span"),this._v("\n        报警类型\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span"),this._v("\n        机构名称\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"second"}},[e("div",{staticClass:"left"},[e("div",{staticClass:"n"},[this._v("报警对比")]),this._v(" "),e("div",{staticClass:"c"},[e("div",{attrs:{id:"chart1"}})])]),this._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"n"},[this._v("同比增长率")]),this._v(" "),e("div",{staticClass:"c"},[e("div",{attrs:{id:"chart2"}})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v("查询时间\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v("报警类型\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v("机构名称\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"titlenew"},[e("i"),this._v("查询时间\n      ")])}]};var o=i("VU/8")(n,c,!1,function(t){i("tPd9")},"data-v-0a97dde6",null);e.default=o.exports},tPd9:function(t,e){}});
//# sourceMappingURL=35.93bef35b604b1a175d22.js.map