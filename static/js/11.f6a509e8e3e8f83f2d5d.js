webpackJsonp([11],{dsKn:function(t,e){},s8RS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("hWqa"),c={props:{dataArr:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}}},data:function(){return{xiangqingData:"",xiangqingindex:0,xiangqingshow:!1}},computed:{},methods:{xiangqing:function(t){this.xiangqingindex=t,this.getXiangQing(t.id)},close:function(){this.xiangqingindex=0,this.xiangqingshow=!1},getXiangQing:function(t){var e=this,a=this.$store.state.key,i={vdeid:t},s=this.$methods.mkSign(i,a),n=this.$gscookie.getCookie("gun"),c=new URLSearchParams;c.append("vdeid",i.vdeid),c.append("sign",s),c.append("token",n),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=Bulletlist&a=index",method:"POST",changeOrigin:!0,data:c}).then(function(t){200==t.data.code&&(e.xiangqingData=t.data.data,e.xiangqingData.length?e.xiangqingshow=!0:(e.$message("暂无数据"),e.xiangqingshow=!1))}).catch(function(t){console.log(t)})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"danyao-zaiku"},[i("div",{staticClass:"top-list"},[i("div",{staticClass:"title"},[i("p",[t._v("弹柜总量："+t._s(t.dataArr.length?t.dataArr.length:0))])]),t._v(" "),i("div",{staticClass:"item-wrap"},t._l(t.dataArr,function(e,s){return i("div",{key:s,staticClass:"item"},[i("p",{staticClass:"title"},[t._v("单位："+t._s(e.org_name))]),t._v(" "),i("img",{attrs:{src:a("P7zm")}}),t._v(" "),i("p",[t._v("弹柜名称："+t._s(e.vdevSN))]),t._v(" "),i("p",[t._v("弹柜类型："+t._s(e.vtype))]),t._v(" "),i("p",[t._v("弹柜编号："+t._s(e.vCaption))]),t._v(" "),i("p",[t._v("弹药数量："+t._s(e.bulletcount))]),t._v(" "),i("h6",{staticStyle:{color:"#fff"},on:{click:function(a){t.xiangqing(e)}}},[t._v("    ")])])}))]),t._v(" "),i("div",{staticClass:"mes"},[t._m(0),t._v(" "),i("ul",{staticClass:"list"},t._l(t.list,function(e,a){return i("li",{key:a,staticClass:"item"},[i("span",[t._v(t._s(e.org_name))]),t._v(" "),i("span",[t._v(t._s(e.bulletType))]),t._v(" "),i("span",[t._v(t._s(e.sums))])])}))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.xiangqingshow,expression:"xiangqingshow"}],staticClass:"xiangqing-wrap"},[i("div",{staticClass:"xiangqing"},[i("p",{staticClass:"title"},[t._v("弹药详情")]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"cabinet"},t._l(t.xiangqingData,function(e,a){return i("div",{key:a,staticClass:"item"},[i("div",{staticClass:"text"},[i("p",[t._v("弹药名称："+t._s(e.bullname))]),t._v(" "),i("p",[t._v("弹药类型："+t._s(e.bulletType))]),t._v(" "),i("p",[t._v("弹药数量："+t._s(e.bulletcount))]),t._v(" "),t._m(1,!0)])])})),t._v(" "),t._m(2)]),t._v(" "),i("button",{staticClass:"close",on:{click:t.close}},[t._v("取消")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("弹柜名称")]),this._v(" "),e("span",[this._v("弹药类型")]),this._v(" "),e("span",[this._v("弹药数量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("div",{staticClass:"dian"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chassis"},[e("div",{staticClass:"up"}),this._v(" "),e("div",{staticClass:"down"})])}]};var r=a("VU/8")(c,o,!1,function(t){a("dsKn")},"data-v-1cd2e263",null).exports,l={components:{breadNav:n.a,Content:r},data:function(){return{active_title:"",activeMechanismId:"",currentNodeKey:"",selValue:"",putValue:"",treeListData:[],dataList:[],liebiao:[],activeItem:"",defaultProps:{children:"child",label:"mechanism_name"}}},methods:{subSearch:function(){this.selValue?this.putValue?this.search(this.activeMechanismId):this.$message({message:"请输入您要搜索的内容",type:"warning"}):this.$message({message:"请选择搜索条件",type:"warning"})},getTreeList:function(t){var e=this,a=this.$store.state.key,i={p:1,ps:6,mechanism_id:t},s=this.$methods.mkSign(i,a),n=this.$gscookie.getCookie("gun"),c=new URLSearchParams;c.append("p",i.p),c.append("ps",i.ps),c.append("mechanism_id",i.mechanism_id),c.append("sign",s),c.append("token",n),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=mechanism&a=mechanisms_tree",method:"POST",changeOrigin:!0,data:c}).then(function(t){200==t.data.code&&(e.treeListData=t.data.data.list)}).catch(function(t){console.log(t)}),this.hasData=!0},handleNodeClick:function(t){this.activeItem=t,this.activeMechanismId=t.id,this.active_title=t.mechanism_name,this.getDataList(t.id)},getDataList:function(t){var e=this,a=this.$store.state.key,i={page:1};t&&(i.id=t);var s=this.$methods.mkSign(i,a),n=this.$gscookie.getCookie("gun"),c=new URLSearchParams;t&&c.append("id",i.id),c.append("page",i.page),c.append("sign",s),c.append("token",n),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=GetDeviceList&a=index",method:"POST",changeOrigin:!0,data:c}).then(function(t){200==t.data.code&&(e.dataList=t.data.data,e.liebiao=t.data.dat)}).catch(function(t){console.log(t)})},search:function(t){var e=this,a=this.$store.state.key,i={mechanism_id:t,page:1},s=this.selValue;i[s]=this.putValue;var n=this.$methods.mkSign(i,a),c=this.$gscookie.getCookie("gun"),o=new URLSearchParams;o.append(s,i[s]),o.append("page",i.page),o.append("mechanism_id",i.mechanism_id),o.append("sign",n),o.append("token",c),this.$axios({url:this.$store.state.baseURL+"/weixin/project/index.php?m=home&c=GetDeviceList&a=index",method:"POST",changeOrigin:!0,data:o}).then(function(t){200==t.data.code&&(e.dataList=t.data.data)}).catch(function(t){console.log(t)})}},created:function(){var t=this.$gscookie.getCookie("message_obj");this.currentNodeKey=this.$gscookie.getCookie("mechanism_id"),3==t.role_id&&this.$router.push({name:"GuiJi"});var e=this.$gscookie.getCookie("mechanism_id");this.activeMechanismId=e,this.getTreeList(e),this.getDataList(e);var a=this.$gscookie.getCookie("gun");"{}"==s()(a)&&this.$router.push("/loginput")}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"danyao"},[a("div",{staticClass:"tree-menu"},[a("h3",[t._v("弹药管理")]),t._v(" "),a("div",{staticClass:"nav-wrap"},[a("el-tree",{attrs:{data:t.treeListData,props:t.defaultProps,"highlight-current":!0,accordion:"","node-key":"id","current-node-key":t.currentNodeKey,"default-expand-all":""},on:{"node-click":t.handleNodeClick}})],1)]),t._v(" "),a("div",{staticClass:"top-nav"},[a("div",{staticClass:"bread-wrap"},[a("breadNav",{attrs:{title:"弹药在库",next:t.active_title}})],1),t._v(" "),a("div",{staticClass:"search-wrap"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selValue,expression:"selValue"}],staticClass:"sel",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selValue=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("请选择搜索类型")]),t._v(" "),a("option",{attrs:{value:"vtype"}},[t._v("弹柜类型")]),t._v(" "),a("option",{attrs:{value:"vdevSN"}},[t._v("弹柜名称")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.putValue,expression:"putValue"}],staticClass:"textput",attrs:{type:"text",placeholder:"请输入搜素关键字"},domProps:{value:t.putValue},on:{keyup:function(e){return"button"in e||13===e.keyCode?t.subSearch(e):null},input:function(e){e.target.composing||(t.putValue=e.target.value)}}}),t._v(" "),a("button",{staticClass:"sub",on:{click:t.subSearch}})])]),t._v(" "),a("div",{staticClass:"page-index",staticStyle:{display:"none"}},[a("el-pagination",{attrs:{"page-size":20,"pager-count":11,layout:"prev, pager, next",total:1e3}})],1),t._v(" "),a("div",{staticClass:"content"},[a("Content",{attrs:{dataArr:t.dataList,list:t.liebiao}})],1),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert",staticStyle:{display:"none"}},[a("div",{staticClass:"text-wrap"},[a("div",{staticClass:"text-title"},[t._v("新增人员")]),t._v(" "),a("div",{staticClass:"text-content"},[a("span",[t._v("名称:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("编号:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("枪支数量:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("警员数量:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("所属单位:")]),t._v(" "),a("input",{attrs:{type:"text"}}),t._v(" "),a("span",[t._v("创建日期:")]),t._v(" "),a("input",{attrs:{type:"text"}})]),t._v(" "),a("div",{staticClass:"submit"},[t._v("确认")])])])}]};var v=a("VU/8")(l,d,!1,function(t){a("z2pY")},"data-v-751ef4b6",null);e.default=v.exports},z2pY:function(t,e){}});
//# sourceMappingURL=11.f6a509e8e3e8f83f2d5d.js.map